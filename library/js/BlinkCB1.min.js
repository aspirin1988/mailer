function get_cookie(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?encodeURIComponent(t[2]):null}function gen_cookie(){var e=Math.random().toString(36),t=Math.random().toString(36);return document.cookie="blinkChat="+t+e,t+e}function BlinkCBModule(){var e=this,t=new XMLHttpRequest;t.open("GET","{host}/client/Template/Get/",!0),t.send();var n=get_cookie("blinkChat");n||(n=gen_cookie()),setInterval(function(){document.getElementById("blink-cb-module-popup-comments")&&setTimeout(function(){var t=document.getElementById("Chat");document.getElementById("chat-token").value=n,e.post(t,"GetChat",function(e){var t=JSON.parse(e),o="",a=Object.keys(t).length;for(i=a-1;i>=0;i--)t[i].data&&t[i].data.message&&(o=t[i].from==n?o+'<div class="site"><p class="bubble">'+t[i].data.message.text+"</p></div>":o+'<div class="operator"><p class="bubble1" >'+t[i].data.message.text+"</p></div>");document.getElementById("Chat-text").innerHTML=o})},1)},3e3),t.onreadystatechange=function(){if(4==this.readyState){var t=this.responseText;document.getElementsByTagName("body")[0];if(t!==!1){var n=document.createElement("div");n.style.position="relative",n.style.zIndex="999999999",n.innerHTML=t,document.body.appendChild(n),e.loadJS()}}}}function BMModule(){}!function e(){var e=document.getElementsByTagName("meta"),t=document.getElementsByTagName("head"),n=!1;for(i=0;i<Object(e).length;i++)"viewport"===e[i].name&&(n=!0,e[i].content.indexOf("width=device-width")>-1||(e[i].content=e[i].content+", width=device-width"));n===!1&&(t[0].innerHTML=t[0].innerHTML+'<meta name="viewport" content="width=device-width, initial-scale=1">')}(),BlinkCBModule.prototype.post=function(e,t,n){for(var o="",a=0;a<e.length-1;a++){var i=e[a].name,s=e[a].value;o+=i+"="+s+"&"}o=o.slice(0,-1);var l=new XMLHttpRequest;l.open("POST","{host}/client/callback/"+t+"/",!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.send(o),l.onreadystatechange=function(){4==this.readyState&&n(this.responseText)}},BlinkCBModule.prototype.clearForm=function(e){for(var t=0;t<e.length-1;t++)e[t].value=""},BlinkCBModule.prototype.blockForm=function(e){for(var t=0;t<e.length-1;t++)e[t].disabled=!0},BlinkCBModule.prototype.unBlockForm=function(e){for(var t=0;t<e.length-1;t++)e[t].disabled=!1},BlinkCBModule.prototype.loadJS=function(){var e=document,t=this,n=e.getElementsByClassName("blink-cb-module-btns-container")[0],o=e.getElementsByClassName("blink-cb-module-main-btns")[0],a=e.getElementsByClassName("blink-cb-module-main-body")[0],i=e.getElementsByClassName("blink-cb-module-exit-body-btn"),s=e.getElementsByClassName("blink-cb-open-popup"),l=e.getElementById("overlay-blink"),r=e.getElementsByClassName("blink-cb-module-main-btn-container")[0],c=e.getElementsByClassName("blink-cb-module-other-btn-container")[0],u=c.children;document.getElementsByClassName("search-blink-cb-module-btn").length>=2&&(document.getElementById("blink-cb-module-own-btn").style.display="none");for(var d=0;d<i.length;d++)i[d].addEventListener("click",function(e){e.preventDefault(),l.style.display="none",o.classList.add("active"),a.style.animationDuration="0.3s",a.classList.remove("fadeInRight"),a.classList.add("fadeOutRight"),document.getElementsByTagName("html")[0].classList.remove("no-overflow"),setTimeout(function(){a.classList.remove("active")},300)});!function(){var e={mainBtn:"bounceInRight",otherBtn:{"in":"fadeInRight",out:"fadeOutRight"}};r.classList.add(e.mainBtn),n.addEventListener("mouseenter",function(){var t=0,n=0;for(c.classList.remove("hidden"),c.style.width=c.clientWidth*u.length+"px",t=0;t<u.length;t++)u[t].classList.remove(e.otherBtn.out),u[t].classList.add(e.otherBtn["in"]),u[t].style.animationDelay="0."+n+"s",u[t].style.animationDuration="0.3s",n++}),n.addEventListener("mouseleave",function(){var t=0,n=0;for(t=u.length;t>0;t--)u[t-1].classList.remove(e.otherBtn["in"]),u[t-1].classList.add(e.otherBtn.out),u[t-1].style.animationDelay="0."+n+"s",u[t-1].style.animationDuration="0.2s",n++;setTimeout(function(){c.classList.add("hidden"),c.style.width="auto"},200)})}(),function(){for(var t=0;t<s.length;t++)s[t].addEventListener("click",function(t){t.preventDefault();var n=this.children[0].getAttribute("href").replace("#",""),i=e.getElementById("blink-cb-module-popup-"+n),r=e.getElementsByClassName("blink-cb-module-flip-container");a.classList.contains("active")||(l.style.display="block",a.style.animationDuration="0.5s",a.classList.add("active"),a.classList.remove("fadeOutRight"),a.classList.add("fadeInRight"),o.classList.remove("active"));for(var c=0;c<s.length;c++)s[c].classList.remove("active");for(var u=0;u<r.length;u++)r[u].classList.remove("active");i.classList.add("active"),e.getElementById("blink-cb-module-to-"+n).classList.add("active"),document.getElementsByTagName("html")[0].classList.add("no-overflow")})}(),function(){for(var n=e.getElementsByClassName("blink-cb-module-popup-form"),o=0;o<n.length;o++)n[o].addEventListener("submit",function(n){n.preventDefault();for(var o=this.getAttribute("data"),a=this.getAttribute("id"),i=this.getAttribute("data-clear"),s=n.target,l=e.getElementById(o),r=e.getElementsByClassName("blink-cb-module-error-messange"),c=e.getElementsByClassName("blink-cb-module-success-messange"),u=l.getElementsByClassName("blink-cb-module-error-messange")[0],d=l.getElementsByClassName("blink-cb-module-success-messange")[0],m=0;m<r.length;m++)r[m].style.display="none",c[m].style.display="none";t.blockForm(s),t.post(s,a,function(e){var n=JSON.parse(e);if("false"===i){var o="",a=Object.keys(n).length;for(m=a-1;m>=0;m--)o="123456789"==n[m].from?o+'<div class="site"><p class="bubble">'+n[m].data.message.text+"</p></div>":o+'<div class="operator"><p class="bubble1" >'+n[m].data.message.text+"</p></div>";t.unBlockForm(s),setTimeout(function(){document.getElementById("chat-clear-text").value=""},1),document.getElementById("Chat-text").innerHTML=o}else"1"===n[0].code?(d.style.display="block",l.classList.add("active-flip"),t.unBlockForm(s),t.clearForm(s)):(u.style.display="block",l.classList.add("active-flip"),t.unBlockForm(s))})})}(),function(){for(var t=e.getElementsByClassName("blink-cb-module-popup-flip-back-btns"),n=0;n<t.length;n++)t[n].addEventListener("click",function(t){t.preventDefault();var n=this.getAttribute("data"),o=e.getElementById(n);o.classList.remove("active-flip")})}()};var loadTemplate=function(){new BlinkCBModule},loadLocalFunc=function(e){window.onload(e),loadTemplate(e)};window.attachEvent?window.attachEvent("onload",loadTemplate):window.onload?window.onload=loadLocalFunc:window.onload=loadTemplate,function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.VMasker=t()}(this,function(){var e="9",t="A",n="S",o=[9,16,17,18,36,37,38,39,40,91,92,93],a=function(e){for(var t=0,n=o.length;n>t;t++)if(e==o[t])return!1;return!0},i=function(e){return e=e||{},e={precision:e.hasOwnProperty("precision")?e.precision:2,separator:e.separator||",",delimiter:e.delimiter||".",unit:e.unit&&e.unit.replace(/[\s]/g,"")+" "||"",suffixUnit:e.suffixUnit&&" "+e.suffixUnit.replace(/[\s]/g,"")||"",zeroCents:e.zeroCents,lastOutput:e.lastOutput},e.moneyPrecision=e.zeroCents?0:e.precision,e},s=function(o,a,i){for(;a<o.length;a++)o[a]!==e&&o[a]!==t&&o[a]!==n||(o[a]=i);return o},l=function(e){this.elements=e};l.prototype.unbindElementToMask=function(){for(var e=0,t=this.elements.length;t>e;e++)this.elements[e].lastOutput="",this.elements[e].onkeyup=!1,this.elements[e].onkeydown=!1,this.elements[e].value.length&&(this.elements[e].value=this.elements[e].value.replace(/\D/g,""))},l.prototype.bindElementToMask=function(e){for(var t=this,n=function(n){n=n||window.event;var o=n.target||n.srcElement;a(n.keyCode)&&setTimeout(function(){t.opts.lastOutput=o.lastOutput,o.value=r[e](o.value,t.opts),o.lastOutput=o.value,o.setSelectionRange&&t.opts.suffixUnit&&o.setSelectionRange(o.value.length,o.value.length-t.opts.suffixUnit.length)},0)},o=0,i=this.elements.length;i>o;o++)this.elements[o].lastOutput="",this.elements[o].onkeyup=n,this.elements[o].value.length&&(this.elements[o].value=r[e](this.elements[o].value,this.opts))},l.prototype.maskMoney=function(e){this.opts=i(e),this.bindElementToMask("toMoney")},l.prototype.maskNumber=function(){this.opts={},this.bindElementToMask("toNumber")},l.prototype.maskAlphaNum=function(){this.opts={},this.bindElementToMask("toAlphaNumeric")},l.prototype.maskPattern=function(e){this.opts={pattern:e},this.bindElementToMask("toPattern")},l.prototype.unMask=function(){this.unbindElementToMask()};var r=function(e){if(!e)throw new Error("VanillaMasker: There is no element to bind.");var t="length"in e?e.length?e:[]:[e];return new l(t)};return r.toMoney=function(e,t){if(t=i(t),t.zeroCents){t.lastOutput=t.lastOutput||"";var n="("+t.separator+"[0]{0,"+t.precision+"})",o=new RegExp(n,"g"),a=e.toString().replace(/[\D]/g,"").length||0,s=t.lastOutput.toString().replace(/[\D]/g,"").length||0;e=e.toString().replace(o,""),s>a&&(e=e.slice(0,e.length-1))}var l=e.toString().replace(/[\D]/g,""),r=new RegExp("^(0|\\"+t.delimiter+")"),c=new RegExp("(\\"+t.separator+")$"),u=l.substr(0,l.length-t.moneyPrecision),d=u.substr(0,u.length%3),m=new Array(t.precision+1).join("0");u=u.substr(u.length%3,u.length);for(var p=0,h=u.length;h>p;p++)p%3===0&&(d+=t.delimiter),d+=u[p];if(d=d.replace(r,""),d=d.length?d:"0",!t.zeroCents){var g=l.length-t.precision,f=l.substr(g,t.precision),v=f.length,b=t.precision>v?t.precision:v;m=(m+f).slice(-b)}var y=t.unit+d+t.separator+m+t.suffixUnit;return y.replace(c,"")},r.toPattern=function(o,a){var i,l="object"==typeof a?a.pattern:a,r=l.replace(/\W/g,""),c=l.split(""),u=o.toString().replace(/\W/g,""),d=u.replace(/\W/g,""),m=0,p=c.length,h="object"==typeof a?a.placeholder:void 0;for(i=0;p>i;i++){if(m>=u.length){if(r.length==d.length)return c.join("");if(void 0!==h&&r.length>d.length)return s(c,i,h).join("");break}if(c[i]===e&&u[m].match(/[0-9]/)||c[i]===t&&u[m].match(/[a-zA-Z]/)||c[i]===n&&u[m].match(/[0-9a-zA-Z]/))c[i]=u[m++];else if(c[i]===e||c[i]===t||c[i]===n)return void 0!==h?s(c,i,h).join(""):c.slice(0,i).join("")}return c.join("").substr(0,i)},r.toNumber=function(e){return e.toString().replace(/(?!^-)[^0-9]/g,"")},r.toAlphaNumeric=function(e){return e.toString().replace(/[^a-z0-9 ]+/i,"")},r}),BMModule.prototype.submitForm=function(e,t){for(var n=this,o=document.getElementsByClassName("blink-mailer"),a=0;a<o.length;a++)o[a].addEventListener("submit",function(o){o.preventDefault();var a=o.target;n.post(a,"SendForm",function(o){if(o){var i=JSON.parse(o);"1"===i[0].code?(n.clearForm(a),e(i[0].text)):t(i[0].text)}})})},BMModule.prototype.clearForm=function(e){for(var t=0;t<e.length-1;t++)e[t].value=""},BMModule.prototype.post=function(e,t,n){for(var o="",a=0;a<e.length-1;a++){var i=e[a].name,s=e[a].value;o+=i+"="+s+"&"}o=o.slice(0,-1);var l=new XMLHttpRequest;l.open("POST","https://callback.blink.kz/client/callback/"+t,!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.send(o),l.onreadystatechange=function(){4==this.readyState&&n(this.responseText)}},document.onreadystatechange=function(){function e(){document.getElementById("blink-main-module").style.display="block";var e=document.querySelector('#Recall input[name="phone"]');VMasker(e).maskPattern("+9(999) 999-99-99");var e=document.querySelector('#Query input[name="phone"]');VMasker(e).maskPattern("+9(999) 999-99-99")}"complete"===document.readyState&&setTimeout(e,1e3)};